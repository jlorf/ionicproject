{"ast":null,"code":"import React from 'react';\nconst Context = /*#__PURE__*/React.createContext({\n  activities: [],\n  professors: [],\n  alumnes: [],\n  moduls: [],\n  jwt: '',\n  logged: false,\n  addActivity: () => {},\n  completeActivity: () => {},\n  ObtenirPersones: () => {},\n  ObtenirModuls: () => {},\n  Login: () => {},\n  Registrar: () => {},\n  presentAlert: () => {},\n  ComprovarJWT: () => {\n    var item = globalThis.localStorage.getItem(\"JWT\");\n    var jwt = item !== null && item !== void 0 ? item : '';\n    var res = $.ajax({\n      method: \"POST\",\n      url: \"http://192.168.2.212/ProjecteGit/JWT/validate_token.php\",\n      data: {\n        jwt: context.jwt\n      },\n      async: false\n    }).responseText;\n    debugger;\n\n    if (res != null && res != undefined) {\n      var resJSON = JSON.parse(res); // .done(function(res: Validar) {\n\n      if ((resJSON === null || resJSON === void 0 ? void 0 : resJSON.message) == \"Access granted.\" && (resJSON === null || resJSON === void 0 ? void 0 : resJSON.data) != null) {\n        //activitiesContext.jwt = res.jwt;\n        context.logged = true;\n        context.jwt = item !== null && item !== void 0 ? item : '';\n      } else {\n        context.logged = false;\n      }\n    } else {\n      logged = false;\n    }\n  }\n});\nexport default Context;","map":{"version":3,"sources":["/home/joel/projecteionic/src/data/context.ts"],"names":["React","Context","createContext","activities","professors","alumnes","moduls","jwt","logged","addActivity","completeActivity","ObtenirPersones","ObtenirModuls","Login","Registrar","presentAlert","ComprovarJWT","item","globalThis","localStorage","getItem","res","$","ajax","method","url","data","context","async","responseText","undefined","resJSON","JSON","parse","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AA2DA,MAAMC,OAAO,gBAAGD,KAAK,CAACE,aAAN,CAAkC;AAC9CC,EAAAA,UAAU,EAAE,EADkC;AAE9CC,EAAAA,UAAU,EAAE,EAFkC;AAG9CC,EAAAA,OAAO,EAAE,EAHqC;AAI9CC,EAAAA,MAAM,EAAE,EAJsC;AAK9CC,EAAAA,GAAG,EAAE,EALyC;AAM9CC,EAAAA,MAAM,EAAE,KANsC;AAO9CC,EAAAA,WAAW,EAAE,MAAM,CAAE,CAPyB;AAQ9CC,EAAAA,gBAAgB,EAAE,MAAM,CAAE,CARoB;AAS9CC,EAAAA,eAAe,EAAE,MAAM,CAAE,CATqB;AAU9CC,EAAAA,aAAa,EAAE,MAAM,CAAE,CAVuB;AAW9CC,EAAAA,KAAK,EAAE,MAAM,CAAE,CAX+B;AAY9CC,EAAAA,SAAS,EAAE,MAAM,CAAE,CAZ2B;AAa9CC,EAAAA,YAAY,EAAE,MAAM,CAAE,CAbwB;AAc9CC,EAAAA,YAAY,EAAE,MAAM;AAEhB,QAAIC,IAAI,GAAGC,UAAU,CAACC,YAAX,CAAwBC,OAAxB,CAAgC,KAAhC,CAAX;AACA,QAAIb,GAAG,GAAIU,IAAJ,aAAIA,IAAJ,cAAIA,IAAJ,GAAY,EAAnB;AACI,QAAII,GAAG,GAAGC,CAAC,CAACC,IAAF,CAAO;AACbC,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,GAAG,EAAE,yDAFQ;AAGbC,MAAAA,IAAI,EAAE;AAAEnB,QAAAA,GAAG,EAAEoB,OAAO,CAACpB;AAAf,OAHO;AAIbqB,MAAAA,KAAK,EAAE;AAJM,KAAP,EAKPC,YALH;AAMA;;AACA,QAAIR,GAAG,IAAI,IAAP,IAAeA,GAAG,IAAIS,SAA1B,EAAoC;AACpC,UAAIC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWZ,GAAX,CAAd,CADoC,CAEhC;;AACA,UAAI,CAAAU,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEG,OAAT,KAAoB,iBAApB,IAAyC,CAAAH,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEL,IAAT,KAAiB,IAA9D,EAAmE;AAC/D;AACAC,QAAAA,OAAO,CAACnB,MAAR,GAAiB,IAAjB;AACAmB,QAAAA,OAAO,CAACpB,GAAR,GAAcU,IAAd,aAAcA,IAAd,cAAcA,IAAd,GAAsB,EAAtB;AACH,OAJD,MAIO;AACHU,QAAAA,OAAO,CAACnB,MAAR,GAAiB,KAAjB;AACH;AACJ,KAVD,MAUO;AACHA,MAAAA,MAAM,GAAG,KAAT;AACH;AAER;AAvC6C,CAAlC,CAAhB;AA0CA,eAAeP,OAAf","sourcesContent":["import React from 'react';\n\nexport type ActivityType = 'rest' | 'work' | 'hobby';\n\nexport interface Activity {\n    id: string;\n    title: string;\n    description: string;\n    hour: string;\n    activityType: ActivityType;\n    imageUrl: string;\n    isCompleted: boolean;\n}\n\nexport interface Persona {\n    codi: BigInteger;\n    Nom: string;\n    Cognoms: string;\n    professor: boolean;\n}\n\nexport interface Modul {\n    codi: BigInteger;\n    Nom: string;\n    Abrev: string;\n}\n\nexport interface LoginReturn {\n    message: string;\n    jwt: string;\n}\n\nexport interface Validar {\n    message: string;\n    data:{\n        id: Number,\n        firstname: string,\n        lastname: string,\n        email: string\n    }\n}\n\nexport interface ContextModel {\n    activities: Activity[];\n    professors: Persona[];\n    alumnes: Persona[];\n    moduls: Modul[];\n    jwt: string;\n    logged: boolean;\n    ObtenirPersones: (professor: boolean) => void;\n    ObtenirModuls: () => void;\n    addActivity: (title: string, description: string, activityType: ActivityType) => void;\n    completeActivity: (activityId: string) => void;\n    Login: (email: string, password: string) => void;\n    Registrar: (nom: string, cognom: string, email: string, password: string) => void;\n    presentAlert: (titol: string, subtitol: string, text: string, buttons: string[]) => void;\n    ComprovarJWT: () => boolean;\n}\n\nconst Context = React.createContext<ContextModel>({\n    activities: [],\n    professors: [],\n    alumnes: [],\n    moduls: [],\n    jwt: '',\n    logged: false,\n    addActivity: () => {},\n    completeActivity: () => {},\n    ObtenirPersones: () => {},\n    ObtenirModuls: () => {},\n    Login: () => {},\n    Registrar: () => {},\n    presentAlert: () => {},\n    ComprovarJWT: () => {\n    \n        var item = globalThis.localStorage.getItem(\"JWT\");\n        var jwt = (item ?? '');\n            var res = $.ajax({\n                method: \"POST\",\n                url: \"http://192.168.2.212/ProjecteGit/JWT/validate_token.php\",\n                data: { jwt: context.jwt },\n                async: false\n            }).responseText;\n            debugger;\n            if (res != null && res != undefined){\n            var resJSON = JSON.parse(res);\n                // .done(function(res: Validar) {\n                if (resJSON?.message == \"Access granted.\" && resJSON?.data != null){\n                    //activitiesContext.jwt = res.jwt;\n                    context.logged = true;\n                    context.jwt = item ?? '';\n                } else {\n                    context.logged = false;\n                }\n            } else {\n                logged = false;\n            }\n        \n    }\n});\n\nexport default Context;"]},"metadata":{},"sourceType":"module"}